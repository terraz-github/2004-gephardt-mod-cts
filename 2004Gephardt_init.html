 campaignTrail_temp.modBoxTheme = {
    "header_color" : "#999999",
    "header_text_color" : "#ffffff",
    "description_text_color" : "#FFFFFF",
    "description_background_color" : "#999999",
    "main_color" : "#4a78cd",
    "secondary_color" : "#4067af",
    "ui_text_color": "#ffffff"
}
 

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 26,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",	
        "pk": 9,
        "fields": {
            "year": 2004,
            "summary": "<p> After a difficult primary battle, St. Louis's representative and Speaker of the House, Richard \"Dick\" Gephardt, has managed to secure the Democratic nomination. With the field cleared of major players like Gore and Kerry by Bush's popularity, Gephardt's unique politics of supporting the war in Iraq and moderate protectionism has been brought to the national stage. </p>\n\n<p> While Gephardt will have an uphill battle ahead of him, especially given that he faces fraught relationships with his party's more liberal wing, he could manage to dethrone Bush if he can thread the needle between left and right, he may just become the next president. </p>",
            "image_url": "https://imgur.com/4iH7xCb.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/V1RkY0Q.png",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">The Florida Recount / 2000 Election</h4><a href=\"http://www.amazon.com/exec/obidos/ASIN/B000RH0DVM/amhius20-20\" target=”_blank”>Jeffrey Toobin - Too Close to Call: The Thirty-Six-Day Battle to Decide the 2000 Election</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/B00EMLDHFI/amhius20-20\" target=”_blank”>Andrew E. Busch & James W. Ceaser - The Perfect Tie: The True Story of the 2000 Presidential Election</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/032110028X/amhius20-20\" target=”_blank”>Larry Sabato - Overtime! The Election 2000 Thriller</a><h4>Books by the Candidates</h4><a href=\"http://www.amazon.com/exec/obidos/ASIN/B000C4SV2I/amhius20-20\" target=”_blank”>George W. Bush - A Charge to Keep: My Journey to the White House</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/0452269350/amhius20-20\" target=”_blank”>Al Gore - Earth in the Balance</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/B003YFIYWY/amhius20-20\" target=”_blank”>The Ralph Nader Reader</a><h4>Links</h4><a href=\"http://www.digitalhistory.uh.edu/disp_textbook.cfm?smtID=2&psid=3377\" target=”_blank”>Digital History - The Disputed Election of 2000</a></br><a href=\"http://www.pbs.org/wnet/supremecourt/future/landmark_bush.html\" target=”_blank”><em>Bush v. Gore</em></a></br><a href=\"http://www.vanityfair.com/news/2004/10/florida-election-2000\" target=”_blank”>The Path to Florida</a></br><a href=\"http://www.historyplace.com/speeches/gore-concedes.htm\" target=”_blank”>Al Gore Concedes the 2000 Election</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "2004"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 77,
        "fields": {
            "first_name": "George W.",
            "last_name": "Bush",
            "election": 9,
            "party": "Republican",
            "state": "Texas",
            "priority": 1,
            "description": "<p>George W. Bush enters 2000 with the support of the Republican establishment and the name recognition of his father. He has governed Texas for five years and won bipartisan support in that state. He seeks to duplicate that formula on the national stage.</p><p>Bush has broad appeal and a united base, but lacks experience and gravitas in the eyes of some. Can he make the case that he will move beyond the partisanship of the Clinton years and bring \"compassionate conservatism\" to the nation?</p>",
            "color_hex": "#da3d41",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/george-w-bush-2000.jpg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2000 election.</h3><p>Confounding the predictions of many experts, you were able to turn the tables on Al Gore, in spite of the economy and Clinton's popularity.</p><p>On the political front, you can push for tax cuts to spur the economy and return the budget surplus to the American people. You might also pursue education and immigration reform, individual Social Security accounts, and new laws to defend the family and the sanctity of life.</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2000 election.</h3><p>Perhaps it was always a long-shot, with the Democrats in such a commanding position after eight years of Bill Clinton. In any case, at least you are still the Governor of Texas.</p><p>Expect Al Gore to unleash a new round of government programs and environmental regulations. You are still youngish, however. If the election was close this time, perhaps you can run again in 2004, or work on behalf your brother Jeb.</p>",
            "no_electoral_majority_message": "<h3>Wow! You have won in a squeaker.</h3><p>No candidate achieved a majority of the electoral votes, marking the first time this has happened since 1824. Fortunately for you, the majority of U.S. states have Republican controlled congressional delegations, and they will cast their votes accordingly.</p><p>Given the incredibly close nature of the election, you will surely be expected to govern as a moderate, conciliatory President. Right??</p>",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 78,
        "fields": {
            "first_name": "Richard \"Dick\"",
            "last_name": "Gephardt",
            "election": 9,
            "party": "Democratic",
            "state": "Missouri",
            "priority": 2,
            "description": "<b> \"Our democracy if self-cleansing. If you don't like it, be a candidate, or support a candidate.\" </b>\n\n<p> In a year when no prominent Democrat expected a victory, Dick Gephardt, once defeated by a Bush 16 years ago, returns to the national scene after a close primary contest against John Edwards and a slew of anti-war liberals, Dick Gephardt has finally attained the Democratic nomination. </p> <p> Promising a return of manufacturing to the Midwest, a relatively hawkish foreign policy, and otherwise moderate policies, Gephardt is seen by many as having a good chance this year, but stopping Bush's reelection will still be an uphill battle. </p>",
            "color_hex": "#151acc",
            "secondary_color_hex": "#90C0FF",
            "is_active": 1,
            "image_url": "https://imgur.com/WNffBZB.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2000 election.</h3><p>Though it was perhaps expected, you could have easily faltered at a number of points. Credit to you for pulling through.</p><p>On the political front, you can continue the Clinton legacy and strengthen Social Security for generations to come. Perhaps you can succeed on health care where Clinton came up short? Or maybe you can create a future of renewable energy for America. Just be wary of a (George or Jeb?) Bush challenge in 2004.</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2000 election.</h3><p>Surely the second-guessing will be intense, but if things were close you could probably run again in 2004.</p><p>It seems that with George W. Bush and a Republican majority, the United States can expect some conservative policy-making over the next four years. Hopefully Bush comes through on his promise to govern in a bipartisan, conciliatory manner. A lot should depend on the margin of his victory, and whether it was large or small.</p>",
            "no_electoral_majority_message": "<h3>Sorry! You have lost in a squeaker.</h3><p>No candidate achieved a majority of the electoral votes, for the first time since 1824. Unfortunately for you, a majority of states have Republican controlled congressional delegations.</p><p>It seems that with George W. Bush and a Republican majority, the United States can expect some conservative policy-making over the next four years. Hopefully Bush comes through on his promise to govern in a bipartisan, conciliatory manner.</p>",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 79,
        "fields": {
            "first_name": "Ralph",
            "last_name": "Nader",
            "election": 9,
            "party": "Independent",
            "state": "Connecticut",
            "priority": 3,
            "description": "<p>Ralph Nader enters the 2000 election as the Green candidate after years as an activist and consumer advocate.</p><p>After eight years of Bill Clinton, it is clear that the United States needs a true liberal alternative -- one that will fight for fair trade, universal health care, free college, and campaign finance reform. Nader's primary goal in this election is to win 5% of the popular vote, which will qualify the Green Party for federal matching funds in 2004.</p>",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/ralph-nader-2000.jpg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2000 election.</h3><p>This was definitely not supposed to happen. Good luck!</p>",
            "electoral_loss_message": "<h3>As expected, you have lost the 2000 election.</h3><p>The legacy of this campaign depends on a couple of factors. First of all, did you receive 5% of the popular vote? If so, congratulations! You will enable the Green Party to run a vigorous campaign in 2004 and present a true choice to the American people. Also, the Democrats were a little peeved that you \"stole\" votes from them in this election. Hopefully that doesn't lead to a backlash.</p>",
            "no_electoral_majority_message": "<h3>Wow! No candidate received 270 electoral votes, but the House will elect George W. Bush as President.</h3><p>Did you receive 5% of the popular vote? If so, congratulations! You will enable the Green Party to run a vigorous campaign in 2004 and present a true choice to the American people. Also, the Democrats were a little peeved that you \"stole\" votes from them in this election. Hopefully that doesn't lead to a backlash, especially since they will lose the vote in the House.</p>",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 80,
        "fields": {
            "first_name": "Gary",
            "last_name": "Nolan",
            "election": 9,
            "party": "Libertarian",
            "state": "Libertyville",
            "priority": 4,
            "description": "''",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "''",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 81,
        "fields": {
            "first_name": "Dick",
            "last_name": "Cheney",
            "election": 9,
            "party": "Republican",
            "state": "Wyoming",
            "priority": 5,
            "description": "''",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/dick-cheney-2000.jpg",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "<p>Dick Cheney is a seasoned operative of the Republican Party who has served as White House Chief of Staff, Minority Whip in Congress, Secretary of Defense, and as CEO of Halliburton. He would be a respected choice across the Republican spectrum, and would add experience and gravitas to the Republican ticket.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 85,
        "fields": {
            "first_name": "John",
            "last_name": "Edwards",
            "election": 9,
            "party": "Democrat",
            "state": "Connecticut",
            "priority": 9,
            "description": "''",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/lfbEM5m.png",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "<b> \"This is America, where everything is still possible.\" -John Edwards </b>\n\n<p>Edwards would be a relatively safe pick. His main primary rival, narrowly winning 1,786 delegates to Gephardt's 1,917, Edwards is widely seen as an olive branch to more mainstream liberals who may have been turned off by Gephardt's more centrist stances, without entirely turning off the Midwestern and Southern swing voters Gephardt will need if he wants to pull this election off. </p>\n\n<p> Edwards, the freshman senator from North Carolina, is broadly popular and well-liked among both the party and his constituents. His selection could possibly open up a pathway to Virginia or perhaps even states like North Carolina or Arkansas if Gephardt plays his cards right.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 86,
        "fields": {
            "first_name": "Wesley",
            "last_name": "Clark",
            "election": 9,
            "party": "Democratic",
            "state": "Florida",
            "priority": 10,
            "description": "''",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/Y213Q3K.jpg",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "<b> NOT DONE BUT COMING SOON MAYBE? </b>\n<p> Wesley Clark, another primary contender (obtaining a mere 58 pledged delegates, barely obtaining a plurality in West Virginia as well as picking up votes in a few other Southern and Western states), would be a controversial pick, to say the least. </p>\n\n<p> He would give Gephardt inroads among foreign-policy-minded voters, particularly hawkish ones, but would turn off many liberals, especially those already suspicious of his campaing. If Gephardt emphasizes his credentials on NAFTA and as speaker under Clinton, perhaps a Gephardt-Clark ticket could keep liberals in line, but perhaps a Clark VP pick could allow a new, more conservative-oriented coalition, abandoning liberals to Ralph Nader? Either way, Wesley Clark would be a deeply controversial choice of running mate. </p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 87,
        "fields": {
            "first_name": "Howard",
            "last_name": "Dean",
            "election": 9,
            "party": "Democratic",
            "state": "Vermont",
            "priority": 11,
            "description": "''",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/KcGbxAB.png",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "<b> NOT DONE BUT COMING SOON MAYBE? </b>\n<p> While Howard Dean might be difficult to get onboard given Gephardt's foreign policy stances, he would, unlike the other candidates on his shortlist, represent an olive branch to more traditionally liberal Democrats. </p> <p> After a 3rd-place performance in the primaries, Howard Dean has emerged as a potential choice for Dick Gephardt's VP. If chosen, he would help stop bleeding to liberal 3rd-parties and plain old apathy among the Democratic liberal base, and would also help in his home region, especially New Hampshire and Vermont. However, he would not help much in the Midwest, Upper South, Florida, or the Southwest, some of the most key regions this year. </p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 88,
        "fields": {
            "first_name": "Tom",
            "last_name": "Vilsack",
            "election": 9,
            "party": "Democratic",
            "state": "Iowa",
            "priority": 12,
            "description": "''",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/gvVE2OA.png",
            "electoral_victory_message": "''",
            "electoral_loss_message": "''",
            "no_electoral_majority_message": "''",
            "description_as_running_mate": "<b> NOT DONE BUT COMING SOON MAYBE? </b>\n<p>Evan Bayh is a Senator from Indiana and a former Governor. He is broadly popular in that state and is a leader of the moderate wing of the Democrats. This could help the Democrats compete in the Midwest and South, but it could also alienate the left-wing of the party and drive additional support to Ralph Nader's bid.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 48,
        "fields": {
            "candidate": 77,
            "running_mate": 81
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 52,
        "fields": {
            "candidate": 78,
            "running_mate": 85
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 53,
        "fields": {
            "candidate": 78,
            "running_mate": 86
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 54,
        "fields": {
            "candidate": 78,
            "running_mate": 87
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 55,
        "fields": {
            "candidate": 78,
            "running_mate": 88
        }
    }
]

campaignTrail_temp.credits = "Terra"

campaignTrail_temp.opponents_default_json = [
    {
        "election": 9,
        "candidates": [
            77,
            78,
            79,
            80
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 9,
        "candidates": [
            77,
            78,
            79,
            80
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 9,
        "year": 2000,
        "is_premium": 0,
        "display_year": "2004"
    }
]

jet_data = {
    "headerColor": "#999999",
    "windowColor": "#f4f4f4",
    "containerColor": "#9c9cfe",
    "innerWindowColor": "#d1d1d1",
    "bannerImageUrl": "https://imgur.com/Ijg0Qno.png",
    "backgroundImageUrl": "https://i.redd.it/zep3m03mctla1.jpg",
    "endingTextColor": "#000000",
    "customQuote": ""
}

//#startcode



nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#999999";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#f4f4f4";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#9c9cfe";

document.getElementById("header").src = "https://imgur.com/Ijg0Qno.png";

document.body.background = "https://i.redd.it/zep3m03mctla1.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#d1d1d1!important;}</style>";

//#endcode




nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#999999";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#f4f4f4";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#9c9cfe";

document.getElementById("header").src = "https://imgur.com/Ijg0Qno.png";

document.body.background = "https://i.redd.it/zep3m03mctla1.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#d1d1d1!important;}</style>";

//#endcode




nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#999999";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#f4f4f4";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#9c9cfe";

document.getElementById("header").src = "https://imgur.com/Ijg0Qno.png";

document.body.background = "https://i.redd.it/zep3m03mctla1.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#d1d1d1!important;}</style>";

//#endcode




nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#999999";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#f4f4f4";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#9c9cfe";

document.getElementById("header").src = "https://imgur.com/Ijg0Qno.png";

document.body.background = "https://i.redd.it/zep3m03mctla1.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#d1d1d1!important;}</style>";

//#endcode

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
var date = new Date(null);
date.setSeconds(seconds);
return date.toISOString().substr(11, 8);
}

generateTime = () => {
// Get the audio element
var audio = document.getElementById("campaigntrailmusic");

timeTracker = document.createElement("div");
timeTracker.style = `
  text-align:left;
  border-style:solid;
  border-width:3px;
  height:150px;
  width:200px;
  background-color:#999999;
  float:right;
  padding: 10px;
`
$("#trackSelParent")[0].prepend(timeTracker);
$("#trackSelParent")[0].prepend(document.createElement("br"));

// Create a new element to display the current position of the audio
var positionDisplay = document.createElement("gg");
positionDisplay.id = "position-display";

// Create a new slider element to change the time
var timeSlider = document.createElement("input");
timeSlider.type = "range";
timeSlider.min = 0;
timeSlider.max = 1;
timeSlider.step = 0.001;
timeSlider.value = 0;
timeSlider.style.width = "200px";
timeSlider.id = "time-slider";

var pausePlay = document.createElement("button");
pausePlay.id = "position-display";
pausePlay.innerHTML = "<b>Pause</b>"
pausePlay.style.width = "100%";


pausePlay.addEventListener("click", event => {
  event.preventDefault();
  updatePositionDisplay();
  let audio = document.getElementById("campaigntrailmusic");
  if (audio.paused) {
    audio.play();
    event.target.innerHTML = "<b>Pause</b>";
    return;
  }
  audio.pause();
  event.target.innerHTML = "<b>Play</b>";
  return;
})

var volumeLabel = document.createElement("gg");
volumeLabel.id = "volume-label";
volumeLabel.innerHTML = "<br><b>Volume: </b>"

var volumeSlider = document.createElement("input");
volumeSlider.type = "range";
volumeSlider.min = 0;
volumeSlider.max = 1;
volumeSlider.step = 0.001;
volumeSlider.value = 0;
volumeSlider.style.width = "200px";
volumeSlider.id = "volume-slider";

volumeSlider.value = audio.volume;

timeTracker.appendChild(pausePlay);
timeTracker.appendChild(document.createElement("br"));
timeTracker.appendChild(document.createElement("br"));
timeTracker.appendChild(positionDisplay);
timeTracker.appendChild(timeSlider);
timeTracker.appendChild(volumeLabel);
timeTracker.appendChild(volumeSlider);

updatePositionDisplay();

//for (let i = 0; i < 10; i++)
//timeTracker.append(document.createElement("br"));


// Function to update the position display
function updatePositionDisplay() {
  positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
  timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
}

// Function to change the time of the audio
function changeTime() {
  positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
  audio.currentTime = timeSlider.value * audio.duration;
}

updateVolume = event => {
  audio.volume = event.target.value;
}

// Update the position display and slider every second
setInterval(updatePositionDisplay, 1000);

// Listen for changes to the time slider and change the time of the audio
timeSlider.addEventListener("input", changeTime);
volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
trackSel = document.createElement("div");
trackSel.id = "trackSelParent"
let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
for (i in soundtracks) {
if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
  z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
}
}
z += `</select></b><br><br>`
// <label><input type="radio" name="option" value="option1">Option 1</label><br>
for (i in soundtracks[e.selectedSoundtrack].tracklist) {
let a = soundtracks[e.selectedSoundtrack].tracklist[i]
let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
z += b
}
z += "</div><br><br>"
trackSel.innerHTML = z

// select correct song

musicBox.appendChild(trackSel);
Array.from(document.getElementById("trackSel").children).filter(f=>{
return f.tagName == "LABEL"
}).map(f=>f.children[0])[0].checked = true

// set soundtrack changer

soundtrackSelector = document.getElementById("selectSoundtrack")
soundtrackSelector.onchange = function() {
for (i in soundtracks) {
  if (soundtracks[i].name == soundtrackSelector.value) {
    e.selectedSoundtrack = i
    break
  }
}
document.getElementById("trackSelParent").remove()
newMusicPlayer()
}

var matches = document.querySelectorAll('.trackSelector');

for (match in matches) {
matches[match].onchange = function() {
  audio = $("#campaigntrailmusic")[0];
  audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
  audio.currentTime = 0
}
}

musicBox.children[2].loop = false
musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

musicBox.children[2].onended = function() {
console.log("next track")
let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
  return f.tagName == "LABEL"
}).map(f=>f.children[0])
//let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
buttons[newSel].click()
}

for (w = 0; w < 7; w++) {
document.getElementById("trackSelParent").appendChild(document.createElement("br"))
}

generateTime();
}

clamp = function(a, max, min, overflow=true) {
if (overflow) {
return a > max ? min : a < min ? max : a;
}
return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
0: {
name: "Gephardt '04",
tracklist: [
  {
    "name": "B.O.B. (Bombs Over Baghdad) - Outkast",
    "url": "https://audio.jukehost.co.uk/VguZNqnE1DJqQACCiqSs6kO7alb3SE8W"
  },
  {
    "name": "Country Grammar (Hot Shit) - Nelly",
    "url": "https://audio.jukehost.co.uk/OKoL88Es97CD4Xwc5BiXQCCbHun7j8RU"
  },              
  {
    "name": "Boll Weevil - The Presidents of the United States of America",
    "url": "https://audio.jukehost.co.uk/DpiB9PuvXUjjrvLsL0td7A71O4oD4v3Y"
  },
 {
    "name": "Diamonds From Sierra Leone (Remix) - Kanye West",
    "url": "https://audio.jukehost.co.uk/u4SbdIRlg2Q58z71EUwAe3Nhoazla3UY"
},          
]
}
}

// Set up new music player

newMusicPlayer()